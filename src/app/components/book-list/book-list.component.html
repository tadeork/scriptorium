<app-search-filter [searchQuery]="searchQuery()" (searchQueryChange)="onSearchQueryChange($event)"
  [selectedStatus]="selectedStatus()" (statusFilterChange)="onStatusFilterChange($event)"
  [selectedCollectionId]="selectedCollectionId()" (collectionFilterChange)="onCollectionFilterChange($event)"
  [customCollections]="collections()" [sortBy]="sortBy()" (sortByChange)="onSortByChange($event)"
  [showFilters]="collection() === 'library'" [statusCounts]="statusCounts()"></app-search-filter>

@if (filteredBooks().length > 0) {
<div class="book-list">
  @for (book of filteredBooks(); track book.id) {
  <app-book-card [book]="book" (deleteBook)="onDeleteBook($event)" (updateStatus)="onUpdateStatus($event)"
    (updateProgress)="onUpdateProgress($event)" (editBook)="editBook.emit($event)" (updateBook)="onBookUpdated($event)"
    (moveToLibrary)="onMoveToLibrary($event)" (moveToWishlist)="onMoveToWishlist($event)"></app-book-card>
  }
</div>
}

@if (filteredBooks().length === 0) {
<div class="empty-state">
  <div class="empty-icon">ðŸ“š</div>
  <p class="empty-message">{{ emptyMessage }}</p>
  @if (searchQuery().trim()) {
  <button class="add-search-btn" (click)="onAddFromSearch()">
    Agregar "{{ searchQuery() }}"
  </button>
  }
</div>
}