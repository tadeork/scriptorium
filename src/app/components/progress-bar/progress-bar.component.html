<div class="progress-bar-container" [class]="'progress-' + variant" [class.disabled]="disabled"
  (click)="$event.stopPropagation()">
  <div class="progress-info">
    <span class="progress-percentage">{{ displayProgress }}%</span>
    @if (pages > 0) {
    <div class="progress-pages-container">
      @if (variant === 'editable' && !disabled) {
      <input type="number" class="progress-input" [ngModel]="pagesReadDisplay" (ngModelChange)="onPagesInput($event)"
        (click)="$event.stopPropagation()" min="0" [max]="pages">
      } @else {
      <span class="progress-pages-text">{{ pagesReadDisplay }}</span>
      }
      <span class="progress-total"> / {{ pages }} páginas</span>
    </div>
    }
  </div>

  @if (variant === 'display') {
  <div class="progress-bar-display">
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="displayProgress"></div>
    </div>
  </div>
  }

  @if (variant === 'editable') {
  <div class="progress-bar-editable" [class.disabled]="disabled">
    <button class="progress-btn progress-btn--minus" (mousedown)="startRepeating('decrement', $event)"
      (touchstart)="startRepeating('decrement', $event)" (mouseup)="stopRepeating()" (mouseleave)="stopRepeating()"
      (touchend)="stopRepeating()" (touchcancel)="stopRepeating()" (keydown.enter)="onDecrement()"
      (keydown.space)="onDecrement()" [disabled]="disabled" title="Disminuir progreso">
      −
    </button>
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="displayProgress"></div>
    </div>
    <button class="progress-btn progress-btn--plus" (mousedown)="startRepeating('increment', $event)"
      (touchstart)="startRepeating('increment', $event)" (mouseup)="stopRepeating()" (mouseleave)="stopRepeating()"
      (touchend)="stopRepeating()" (touchcancel)="stopRepeating()" (keydown.enter)="onIncrement()"
      (keydown.space)="onIncrement()" [disabled]="disabled" title="Aumentar progreso">
      +
    </button>
  </div>
  }
</div>